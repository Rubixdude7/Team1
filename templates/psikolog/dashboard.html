{% extends "base.html" %}

{% block title %}Parent Profile{% endblock %}

{% block head %}
    {{ super() }}
    <script type="text/javascript" src="/static/scripts/pagination.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            var blog = $('#blog-list');
            
            $('#blog-pagination').pagination({
                dataSource: '/api/blog/{{ psyc_info.psyc_id }}',
                locator: 'posts',
                pageSize: 10,
                totalNumberLocator: function(response) {
                    return response.total;
                },
                alias: {
                    pageNumber: 'page_num',
                    pageSize: 'page_size'
                },
                beforeRender: function(isForced) {
                    // Insert a spinner
                    blog.html('<div class="lds-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>');
                },
                callback: function(data, pagination) {
                    var html = '';
                    
                    for (var i = 0; i < data.length; i++) {
                        var post = data[i];
                        
                        html += '<li>';
                        html += post.subject;
                        html +=' <a href="#"><i class="fas fa-edit" aria-hidden="true"></i><span class="sr-only">Edit</span></a>';
                        html +=' <a href="#"><i class="fas fa-trash" aria-hidden="true"></i><span class="sr-only">Delete</span></a>';
                        html += '</li>';
                    }
                    
                    blog.html(html);
                }
            });
        });
    </script>
{% endblock %}

{% block content %}
<main>
    <div class="flex">
        <div class="side-column">
            <div class="box">
                <p><img src="{{ avatar_url }}" style="width:100%"></p>
                <a href="{{ url_for('change_avatar') }}" class="btn btn-outline-info"><i class="fas fa-image" aria-hidden="true"></i> Change Your Picture</a>
            </div>
        </div>
        <div class="main-column">
            <div class="box">
                <h1 class="title">Dashboard</h1>
                <hr>
                
                <p>Bio: {{ psyc_info.qualifications }} <a href="{{ url_for('edit_qualifications') }}" class="btn btn-outline-info"><i class="fas fa-edit"></i> Edit</a></p>
            </div>
            <div class="box">
                <h3>Blog Editor</h3>
                <div id="blog-pagination" class="pagination"></div>
                <ul id="blog-list"></ul>
            </div>
        </div>
    </div>
</main>



{% endblock %}
